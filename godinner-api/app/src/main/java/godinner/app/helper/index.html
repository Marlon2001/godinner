<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Tamplete Restaurante</title>
    <link rel="stylesheet" href="./../../../../paginasEstaticas/restaurante/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../css/style.css">
    <script type="text/javascript" src="./../../../../paginasEstaticas/restaurante/jquery/jquery.js"></script>
    <script type="text/javascript"
        src="./../../../../paginasEstaticas/restaurante/bootstrap/js/bootstrap.min.js"></script>
</head>



<body class="w-75 mx-auto">
    <!-- navbar -->
    <nav class="position-fixed navbar navbarColor justify-content-around w-75">
        <a class="navbar-brand" href="#">
            <img class="logo rounded float-left" style="max-width: 55px" alt="" />
        </a>
        <ul class="nav justify-content-end w-50">
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Menu</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Galeria</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Sobre o Restaurante</a>
            </li>
        </ul>
    </nav>
    <!-- container-inicial -->
    <div class="container-fluid p-0" style="max-height: 700px">
        <img class="w-100" src="../imgs/imagem.jpg" alt="" />
    </div>

    <!-- Container Sla -->
    <div class="container-fluid bg-image-container2" style="min-height: 250px" back>

        <h1 class="nomeRes pt-2 pb-2 text-center text-light">
            <!-- Nome Restaurante -->
        </h1>

        <div class="d-block">
            <p id="" class="sobreRes h5 text-center text-light">
                <!-- Descrição Restaurante   -->
            </p>
        </div>
    </div>

    <!-- Container Carousel -->
    <div class="container-fluid" style="min-height: 700px">
        <h1 class="text-center pt-2">MENU</h1>
        <div class="container w-25 mt-3 mb-0">
            <div class="d-flex justify-content-between">

                <figure class="figure my-auto">
                    <img class="m-1" style="max-height: 64px"
                        src="https://cdn3.iconfinder.com/data/icons/fast-food-outline-2/427/burger_hamburger_meat_cheese_food_meal_fast_restaurant_junk_fastfood-64.png"
                        alt="Icone Hambúguer" />
                </figure>

                <figure class="figure my-auto">
                    <img class="m-1" style="max-height: 64px"
                        src="https://cdn3.iconfinder.com/data/icons/fast-food-outline-2/439/pizza_italian_cheese_slice_tomato_food_meal_fast_restaurant_junk_fastfood-64.png"
                        alt="Icone Pizza" />
                </figure>
                
                <figure class="figure my-auto">
                    <img class="m-1" style="max-height: 64px"
                        src="https://cdn0.iconfinder.com/data/icons/fastfood-29/64/cup-soft-drink-water-takeaway-fastfood-cola-64.png"
                        alt="Icone Refrigerante" />
                </figure>
            </div>
        </div>
        <hr>
        <!-- carousel -->

        <div class="carousel slide mt-5" id="ProdutosRestaurante" data-ride="carousel">

            <ol class="carousel-indicators">
                <li data-target="#ProdutosRestaurante" data-slide-to="0" class="active"></li>
                <li data-target="#ProdutosRestaurante" data-slide-to="1"></li>
                <li data-target="#ProdutosRestaurante" data-slide-to="2"></li>
            </ol>
            <div id="boxCarousel" class="carousel-inner">

                <!-- Item Carousel -->
            </div>
            <!-- SETAS -->
            <a class="carousel-control-prev" href="#ProdutosRestaurante" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#ProdutosRestaurante" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>

    <!-- Container Mais Vendidos -->
    <div class="container-fluid bg-image-container3 p-0" style="min-height: 400px">
        <div class="container-fluid navbarColor p-5" style="min-height: inherit">
            <div id="boxMais" class="container w-50 mx-auto">
                <!-- Titulo -->
                <h1 class="text-center text-white">Mais Vendidos</h1>
                
            </div>
        </div>
    </div>

    <!-- Container sobre nós -->
    <div class="container-fluid" style="min-height: 300px">
        <h1 id="titleSobre" class="text-center p-3">Sobre Nós</h1>
        <p id="sobreGodinner" class="sobreRes text-center w-75 text-wrap mx-auto" style="max-height: 300rem">
            <!-- Sobre a Godinne -->
        </p>
        <div class="d-flex flex-row w-75 mx-auto mt-5 justify-content-around">
            <div class="d-flex flex-column">
                <p>
                    <span class="nomeRes">
                        <!-- Nome Empresa --></span> - <span id="cityRes">
                        <!-- Cidade --> </span>
                </p>
            </div>
            <div class="d-flex flex-column">
                Pagamento pelo App GoDinner: Visa , Elo, Amex,
            </div>
        </div>
    </div>

    <!-- Container Galeira -->
    <div class="container-fluid">
        <h1 class="text-center p-3">Galeria de fotos</h1>
        <div class="row">
            <div id="boxGaleria" class="col-md-12">

            </div>
        </div>
    </div>

    <script>
        $(document).ready(function () {
            const idRestaurante = ${idRestaurante};
            const DOMAIN = "http://localhost:8080";
            const TOKEN = "eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJydWJ1cmd1ZXJAZ21haWwuY29tIiwiZXhwIjoxNTcyMzgwMjI3LCJpYXQiOjE1NzIzNjIyMjd9.cVAUmP1pC7rjrbodkcF_e30eZp4TgyTji3wUEY14oZVocSJBYu-R0l9EkroKYny44-crtzuZmZUjZEtVnHW3ng"; 
            function buscarRestaurante() {
                // let url = DOMAIN + `/templates/restaurantes/${idRestaurante}`;
                let url = DOMAIN + `/restaurante/${idRestaurante}`;
                $.ajax({
                    url: url,
                    method: 'get',
                    headers:{ token: TOKEN},
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {
                        // $(".sobreRes").text(resposta.sobre);
                        // $(".nomeRes").text(resposta.restaurante.razaoSocial);
                        // $("#cityRes").text(resposta.restaurante.endereco.cidade.cidade);
                        // $(".logo").attr("src", resposta.restaurante.foto);
                    }.bind(this),
                    error: function (data) {
                        console.log(data)
                    }
                });
            }
			
			function produto(resposta){
                
                var rubens = [];
                
                for(let cont = 0; cont < 3; cont++){
                    rubens.push(resposta.shift());
                }
                console.log(rubens)
                return rubens
            } 
            function carousel(){
                
                $.ajax({
                    url: "https://servicodados.ibge.gov.br/api/v1/localidades/mesorregioes",
                    method: 'get',
                    headers:{token: TOKEN},
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {
                    for(let cont = 0; cont < 3; cont++){
                            
                        if(cont == 0){
                            $(".carousel-inner").append($(`<div class="carousel-item active">`).append($(`<div class="abc d-flex justify-content-around p-3">`)))
                        }else{
                            $(".carousel-inner").append($(`<div class="carousel-item ">`).append($(`<div class="abc d-flex justify-content-around p-3">`)))
                        }
                        var teste = produto(resposta)
                        
                        for(let i in teste){
                            
                            $(".abc").append($(`<div class="card mb-2 float-left" style="width: 18rem;">`)
                                    .append($(`<img class="card-img-top" alt="Card image cap">`).attr("src","https://png.pngtree.com/element_pic/17/07/26/eb63d3b8ae4d2a1de45ba95e6d5b53ae.jpg"))
                                .append($(`<div class="card-body">`)
                                    .append($(`<h5 class="card-title text-center">`).text(teste[i].id))
                                    .append($(`<p class="card-text">`).text(teste[i].nome))
                                )   
                            )  
                        }
                    }
                    }.bind(this),
                    error: function (data) {
                        console.log(data)
                    }
                });
            }
            function maisVendidos(){
                // url = DOMAIN + `/templates/restaurantes/maisvendidos`;
                url = DOMAIN + `/produto`;
                $.ajax({
                    url: url,
                    method: 'get',
                    headers:{ token: TOKEN},
                    dataType: 'json',
                    contentType: 'application/json',
                    success:function(resposta) {
                        for(let i in resposta){
                             
                            $("#boxMais").append(
                                $(`<div class="d-flex flex-row justify-content-between pt-3 mb-3" style="border-bottom: 3px solid white; border-bottom-style:dotted;">`)
                                    .append($(`<div class="d-flex flex-column text-white">`).append($(`<h3>`).text(resposta[i].nome)),
                                            $(`<div class="d-flex flex-column text-white">`).append($(`<h3>`).text(resposta[i].preco))
                                    ))
                        }
                        console.log(Object.keys(resposta).length)
                    }.bind(this),
                    error: function (data) {
                        console.log(data);
                    }
                });
            }
            // function buscarCategoriasRestaurante() {
            //     url = DOMAIN + `/categoriaproduto/categorias/${idRestaurante}`;
            //     $.ajax({
            //         url: url,
            //         method: 'get',
            //         dataType: 'json',
            //         contentType: 'application/json',
            //         success: function (resposta) {
            //             if(Object.keys(resposta).length <= 3){
            //                 $("#boxCarousel").append($(`<div class="carousel-item active ">`))
            //             }
                        
            //             if(Object.keys(resposta).length <= 6){
                            
            //                 $("#boxCarousel").append($(`<div class="carousel-item">`))
            //             }else{
            //             }
            //             for(let i in resposta){
            //                 const idCategoria = JSON.stringify(resposta[i].id)
            //                 buscarProdutosCategoria(idCategoria)
            //             }
            //         }.bind(this),
            //         error: function (data) {
            //             console.log(data)
            //         }
            //     });
            // }
            // function buscarProdutosCategoria(idCategoria) {
            //     url = DOMAIN + `/categoriaproduto/restaurantes/${idRestaurante}/categorias/${idCategoria}`;''
            //     $.ajax({
            //         url: url,
            //         method: 'get',
            //         dataType: 'json',
            //         contentType: 'application/json',
            //         success: function (resposta) {
            //             // console.log(Object.keys(resposta).length)
            //         }.bind(this),
            //         error: function (data) {
            //             console.log(data)
            //         }
            //     });
            // }
            function galeria(){
                url = DOMAIN + `/categoriaproduto/categorias/${idRestaurante}`;
                $.ajax({
                    url: url,
                    method: 'get',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (resposta) {
                        
                        for(let i in resposta){
                            $("#boxGaleria").append($(`<figure class="col-md-4 float-left">`)
                                .append($(`<a href="" data-size="1600x1067">`).attr("href", resposta.id)
                                    .append($(`<img alt="picture" src="" class="img-fluid"/>`).attr("src", resposta.id)
                                    )))
                                }
                    }.bind(this),
                    error: function (data) {
                        console.log(data)
                    }
                });
            }
            carousel();
            galeria();
            maisVendidos();
            buscarRestaurante();
            // buscarCategoriasRestaurante();
        });
    </script>
</body>

</html>